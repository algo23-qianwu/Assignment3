# 广发证券-另类交易策略之十三： 基于统计语言模型（SLM）的择时交易研究

语音识别专家要识别一段语言，即选择一组可能性最大的句子，首先将句子分词，然后根据语料库估算一个给定语句的可能性，从而选择可能性最大的语句作为识别结果。股市择时中，我们将历史行情数据进行符号化之后，转化为涨跌符号序列，在给定过去一段时间内的涨跌序列后，我们计算该条件下的未来涨跌的条件概率，较大者为预测结果，相比较而言，我们的语料库为历史数据。


## 统计语言模型SLM
### 二元模型 Bigram Model
- 假设S表示为一个有意义的句子，由 w_1, w_2, w_3 ... w_n 词组成，句子的长度为n，现在我们要求得该语句可能性即概率 P(S) = P(w_1, w_2, w_3, ... w_n)
- 依照条件概率展开：P(w_1, w_2, w_3, ... w_n) = P(w_1)xP(w_2|w_1)xP(w_3|w_1,w_2)...P(w_n|w_1,w_2,...w_n-1)
- 为简化起见，假设模型具备马尔科夫性：P(S) = P(w_1)xP(w_2|w_1)xP(w_3|w_2)...P(w_n|w_n-1)
- 根据大数定律，相对频度近似为概率：P(w_i|w_i-1) = #(w_i, w_i-1) / #(w_i-1)

## N元模型及其择时应用
- 指数收盘价序列为p1, p2, p3, ..., pn。将该价格序列转化为符号序列：s1, s2, s3, ..., sn.
    - 如果p_i < p_i-1, s_i = 1, else, s_i = 2.
- 对于择时问题，我们需要得到下一个交易日的涨跌的概率，从而判断下一个交易日的涨跌：如果上涨的概率大则判断上涨，下跌的概率大则判断为下跌
    - P(上涨) = P(s_i = 2|s_i-N+1, s_i-N+2, ..., s_i-1)
    - P(下跌) = P(s_i = 1|s_i-N+1, s_i-N+2, ..., s_i-1)
- 有了下一个交易日的涨跌我们进行如下的交易策略设计：
1. 由于股指期货在交易日正股收市之后仍然有15分钟的交易时间，因此交易策略设计为当日15点至15点15分进行交易，下一个交易日观察持仓风险暴露情况，
2. 如果浮亏达到或者超过1%，那么立即进行平仓，当日股票市场收市后再进行下一个交易日的涨跌判断，在股指期货市场进行相应的头寸开仓，
3. 如果当时未发生止损，那么根据下一个交易日的判断进行顺延操作，
4. 如果下一个交易日判断方向与当前持仓方向相同，那么不进行操作，如果持仓方向不一致，那么进行先平仓再开仓的操作。


## 数据选取
- 数据选取，本实证选取2000年1月1日至2022年12月25日的历史日线数据， 
- 其中2000至2007年为样本内，用来作为初始语料库，用来训练模型，同时，不断扩充历史数据，依次扩充语料库。

